{"componentChunkName":"component---node-modules-gatsby-theme-documentation-src-templates-doc-js","path":"/apis/commands","result":{"data":{"doc":{"id":"dcf0c70e-4922-56c0-b716-eb8d8c78e19f","title":"","description":null,"excerpt":"commands The  commands  API allows you to retrieve information from any application or shell command. It can accept multiple commandsâ€¦","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"commands\"\n  }, mdx(\"inlineCode\", {\n    parentName: \"h1\"\n  }, \"commands\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"commands\"), \" API allows you to retrieve information from any application or shell command. It can accept multiple commands executed in sequence.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#Basicusage\"\n  }), \"Basic usage\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#Configurationproperties\"\n  }), \"Configuration properties\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#Advancedusage\"\n  }), \"Advanced usage\"))), mdx(\"h2\", {\n    \"id\": \"a-namebasicusageabasic-usage\"\n  }, mdx(\"a\", {\n    name: \"Basicusage\"\n  }), \"Basic usage\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"name: example\\napis:\\n  - name: linuxDirectorySize\\n    commands:\\n      - run: du -c /somedir\\n        split: horizontal\\n        set_header: [dirSizeBytes,dirName]\\n        regex_match: true\\n        split_by: (\\\\d+)\\\\s+(.*)\\n\")), mdx(\"p\", null, \"This configuration retrieves the raw output provided by the command defined in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"run\"), \", which outputs a pair of values: the directory size, and the directory name. It also informs Flex that the output is horizontally formatted and has two columns as defined in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"set_header\"), \". Finally, it extracts the values using the regex expression defined in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"split_by\"), \", and assigns to each of the columns set in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"set_header\"), \".\"), mdx(\"h2\", {\n    \"id\": \"a-nameconfigurationpropertiesaconfiguration-properties\"\n  }, mdx(\"a\", {\n    name: \"Configurationproperties\"\n  }), \"Configuration properties\"), mdx(\"p\", null, \"The following table describes the properties of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"commands\"), \" API. The API accepts a list of commands, each requiring a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"run\"), \" directive.\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), \"Name\"), mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"Type\"), mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"Default\"), mdx(\"th\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Description\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"run\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"string\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  })), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Command or application that you want to run. It accepts any valid shell command. You can also use environment variables with the format \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"$$ENV_VAR_NAME\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"shell\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"string\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"/bin/sh\"), \" (Linux) \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"cmd\"), \" (Windows)\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Shell to use when executing the command defined in \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"run\"), \". All native Linux shells, Windows CMD, and Windows PowerShell v1-5.x (\", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"powershell\"), \") and v6+ (\", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"pwsh\"), \") are supported.\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"split\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"string\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"vertical\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Mode of processing of the command output, either vertical with one value per line, or horizontal with more than one value per line (table format). Only used when \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"ignore_output\"), \" is false\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"split_by\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"string\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  })), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Regular expression used to process metric data\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"regex_match\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"string\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  })), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Whether the regular expression defined in \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"split_by\"), \" should be interpreted as a match expression (\", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"true\"), \") or as a split expression (\", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"false\"), \")\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"row_header\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"int\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"0\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Line that contains the header. Only applies if the value is not equal to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"row_header\"), \" and is greater than or equal to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"1\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"row_start\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"int\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"0\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Line number where Flex starts processing metric data. If \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"split\"), \" is set to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"horizontal\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"row_start\"), \" is only used if \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"row_start\"), \" is not equal to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"row_header\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"row_start\"), \" is greater than or equal to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"1\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"line_start\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"int\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"0\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Line number where Flex will start processing data. If \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"split\"), \" is set to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"horizontal\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"row_start\"), \" is defined, \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"line_start\"), \" will only be used if \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"line_start\"), \" is not equal to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"row_header\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"line_start\"), \" is greater than or equal to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"1\"), \". If both \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"row_start\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"line_start\"), \" are defined, \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"line_start\"), \" takes precedence\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"line_end\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"int\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"0\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Line number (exclusive) at which Flex stops processing data. Only applies if \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"split\"), \" is not equal to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"horizontal\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"set_header\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"array of strings\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"[]\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Name and number of columns Flex should extract data from. Only applies if \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"split\"), \" is equal to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"horizontal\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"header_regex_match\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"bool\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"false\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Whether the regular expression in \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"header_split_by\"), \" should be interpreted as a match expression (\", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"true\"), \") or as a split expression (\", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"false\"), \"). Applies only if \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"split\"), \" is equal to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"horizontal\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"header_split_by\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"string\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  })), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Regular expression applied to the header line. Applies only if \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"split\"), \" is equal to \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"horizontal\"))), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"split_output\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"string\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  })), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Regular expression used to split the output into blocks of data\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"right\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"timeout\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), \"int\"), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": \"center\"\n  }), mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"10\")), mdx(\"td\", _extends({\n    parentName: \"tr\"\n  }, {\n    \"align\": null\n  }), \"Time to wait for the command to execute. If the command takes longer than \", mdx(\"inlineCode\", {\n    parentName: \"td\"\n  }, \"timeout\"), \", Flex ignores the output and returns an error. Note that Flex waits for the command to stop by itself\")))), mdx(\"h2\", {\n    \"id\": \"a-nameadvancedusageaadvanced-usage\"\n  }, mdx(\"a\", {\n    name: \"Advancedusage\"\n  }), \"Advanced usage\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"commands\"), \" API accepts additional format directives to better parse the output.\"), mdx(\"h3\", {\n    \"id\": \"a-namerawdataparsingaraw-data-parsing\"\n  }, mdx(\"a\", {\n    name: \"Rawdataparsing\"\n  }), \"Raw data parsing\"), mdx(\"p\", null, \"In the example below, the output from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"df\"), \" command is treated as a table with a header. We instruct Flex to extract values using a regex split expression; in this particular case, the regex expression tells Flex that the values are separated by spaces. Value are then assigned in order of appearance to the corresponding keys.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"---\\nname: example\\napis:\\n  - name: diskFree\\n    commands:\\n      - run: df -T\\n        split: horizontal\\n        set_header: [fs,fsType,blocks,usedBytes,availableBytes,usedPerc,mountedOn]\\n        row_start: 1\\n        split_by: \\\\s+\\n\")), mdx(\"p\", null, \"In this next example, we don't specify the keys to which the values will be assigned and instead use a regex expression to extract the keys from the header. Since we are not specifying the header row number neither the values start row, Flex assumes the first row is the header and the next lines are the value rows.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"---\\nname: example\\napis:\\n  - name: diskFree\\n    commands:\\n      - run: df -T\\n        header_split_by: \\\\s+\\n        split: horizontal\\n        regex_match: true\\n        split_by: (\\\\S+)\\\\s+(\\\\d+)\\\\s+(\\\\d+)\\\\s+(\\\\d+)\\\\s+(\\\\d+)%\\\\s+(\\\\d+)\\\\s+(\\\\d+)\\\\s+(\\\\d+)%\\\\s+(.*)\\n\")), mdx(\"p\", null, \"To extract the values we use a regex expression in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"split_by\"), \". Note that in this case we extract the names of the metric attributes from raw data, so we must be sure that those are correct.\"), mdx(\"h3\", {\n    \"id\": \"a-namespecifytheshellaspecify-the-shell\"\n  }, mdx(\"a\", {\n    name: \"Specifytheshell\"\n  }), \"Specify the shell\"), mdx(\"p\", null, \"All commands are executed using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/bin/sh\"), \" (Linux) or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cmd\"), \" (Windows). If you want to use a different shell, you can specify it at API level for all commands, or at command level, which overrides values set at the API level.\"), mdx(\"p\", null, \"In the example below, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/bin/zsh\"), \" applies only to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"some_other_command\"), \", since \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"shell: /bin/bash\"), \" overrides the API level statement for \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"df -T\"), \".\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"---\\nname: example\\napis:\\n  - name: diskFree\\n    shell: /bin/zsh\\n    commands:\\n      - run: df -T\\n        shell: /bin/bash\\n        header_split_by: \\\\s+\\n        split: horizontal\\n        regex_match: true\\n        split_by: (\\\\S+)\\\\s+(\\\\d+)\\\\s+(\\\\d+)\\\\s+(\\\\d+)\\\\s+(\\\\d+)%\\\\s+(\\\\d+)\\\\s+(\\\\d+)\\\\s+(\\\\d+)%\\\\s+(.*)\\n      - run: some_other_command\\n        split_by: \\\\s+\\n\")), mdx(\"h3\", {\n    \"id\": \"a-namespecifyatimeoutaspecify-a-timeout\"\n  }, mdx(\"a\", {\n    name: \"Specifyatimeout\"\n  }), \"Specify a timeout\"), mdx(\"p\", null, \"Flex defines a 10 second timeout for each command by default. If the command does not complete within the timeout period, Flex stops processing the current command and moves to the next. You can change the timeout at both API and command levels. Timeout values are specified in milliseconds (for example, 15 seconds are specified as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"15000\"), \").\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"name: example\\napis:\\n  - name: linuxTimeout\\n    timeout: 5000\\n    shell: /bin/sh\\n    commands:\\n      - run: sleep 10\\n        name: timesOut\\n      - run: sleep 3\\n        name: doesNotTimeout\\n      - run: sleep 10\\n        name: alsoDoesNotTimeout\\n        timeout: 15000        \\n\")), mdx(\"p\", null, \"In the example above we declare three commands. The timeout value of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"5000\"), \" declared at the API level applies to all commands except \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"alsoDoesNotTimeout\"), \", which has its own \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"timeout\"), \" statement. Note that Flex will return an error for the first command:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"command: timed out err=\\\"context deadline exceeded\\\" exec=\\\"sleep 10\\\"`)\\n\")), mdx(\"h3\", {\n    \"id\": \"a-namesplittheoutputasplit-the-output\"\n  }, mdx(\"a\", {\n    name: \"Splittheoutput\"\n  }), \"Split the output\"), mdx(\"p\", null, \"In case the output of the command is not a sequential list of lines/values, use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"split_output\"), \" to separate results into blocks that are to be processed sequentially. The directive accepts a regex expression for splitting the output into blocks. You can either use a list of regex expressions to extract data from each block, or try raw processing using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"split_by\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yaml\"\n  }), \"name: example\\napis:\\n  - name: splitOutput\\n    commands:\\n      - run: echo \\\"key:value\\\" && echo \\\"---\\\" && echo \\\"other_key:otherValue\\\"\\n        split_output: ---\\n        regex_matches:\\n          - expression: \\\\S*key:(\\\\w+)\\n            keys: [value]\\n\")), mdx(\"p\", null, \"If you run the command defined in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"run\"), \" directive, you get the following result:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"key:value\\n---\\nother_key:otherValue\\n\")), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"split_output\"), \" command as defined above gets two blocks of data to which Flex then applies the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"regex_matches\"), \" expressions for extracting the values. This example results in two metric samples:\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-json\"\n  }), \"[{\\n  \\\"event_type\\\": \\\"splitOutputSample\\\",\\n  \\\"integration_name\\\": \\\"com.newrelic.nri-flex\\\",\\n  \\\"value\\\": \\\"value\\\"\\n},\\n{\\n  \\\"event_type\\\": \\\"splitOutputSample\\\",\\n  \\\"integration_name\\\": \\\"com.newrelic.nri-flex\\\",\\n  \\\"value\\\": \\\"otherValue\\\"\\n}]\\n\\n\")), mdx(\"h3\", {\n    \"id\": \"a-namemanuallyspecifyblocksofdatatoprocessamanually-specify-blocks-of-data-to-process\"\n  }, mdx(\"a\", {\n    name: \"Manuallyspecifyblocksofdatatoprocess\"\n  }), \"Manually specify blocks of data to process\"), mdx(\"p\", null, \"If you know at which line the relevant data starts and where it ends, you can use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"line_start\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"line_end\"), \" (optional) to limit the data processing to a specific number of lines from the output.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yml\"\n  }), \"name: example\\napis:\\n  - name: lineStart\\n    commands:\\n      - run: echo \\\"this is noise\\\" && echo \\\"key:value\\\"\\n        line_start: 1\\n        split_by: \\\":\\\"\\n\")), mdx(\"p\", null, \"In the example above, we only want to process data after the first (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"0\"), \") line, so we set \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"line_start\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"1\"), \". If we know that after a specific line the data is not useful, we can limit the set of lines Flex processes by adding \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"line_end\"), \":\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-yml\"\n  }), \"name: example\\napis:\\n  - name: lineStart\\n    commands:\\n      - run: echo \\\"this is noise\\\" && echo \\\"key:value\\\" && echo \\\"otherKey:otherValue\\\" && echo \\\"more noise\\\"\\n        line_start: 1\\n        line_end: 3\\n        split_by: \\\":\\\"\\n\")), mdx(\"p\", null, \"Note that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"line_end\"), \" is exclusive, meaning that you have to add \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"1\"), \" (\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"0\"), \" indexed) to the actual line you want to stop being processed.\"));\n}\n;\nMDXContent.isMDXComponent = true;","headings":[{"value":"commands"},{"value":"<a name='Basicusage'></a>Basic usage"},{"value":"<a name='Configurationproperties'></a>Configuration properties"},{"value":"<a name='Advancedusage'></a>Advanced usage"},{"value":"<a name='Rawdataparsing'></a>Raw data parsing"},{"value":"<a name='Specifytheshell'></a>Specify the shell"},{"value":"<a name='Specifyatimeout'></a>Specify a timeout"},{"value":"<a name='Splittheoutput'></a>Split the output"},{"value":"<a name='Manuallyspecifyblocksofdatatoprocess'></a>Manually specify blocks of data to process"}]}},"pageContext":{"id":"dcf0c70e-4922-56c0-b716-eb8d8c78e19f","slug":"/apis/commands","previous":{"id":"83b307f0-3b44-5ac7-8311-bfe320cf0e63","slug":"/apis"},"next":{"id":"2d2a7ca5-4850-5f8c-95df-0691e76e52fa","slug":"/apis/url"}}}}