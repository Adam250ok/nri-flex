<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/flex/styles.0cd87480fafd4a24e9ad.css">@import url(https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600,600i,700,700i&display=swap);.timeline--wrapper{width:calc(100% - 24px);padding:12px}.timeline{width:100%;max-width:800px;padding:15px 0 0;position:relative;margin:50px auto}.timeline:before{content:"";position:absolute;top:0;left:calc(33% + 6px);bottom:0;width:0;border:2px solid}.timeline:after{content:"";display:table;clear:both}@media only screen and (max-width:768px){.timeline:before{left:calc(1% + 6px)}}.body-container{position:relative;margin-left:30px}.timeline-item--no-children .body-container{background:transparent;box-shadow:none}.body-container:after{content:"";display:table;clear:both}.timeline-item-date{position:absolute;top:-12px;left:0;background:#ddd;padding:1px;height:52px;box-sizing:border-box;width:90%}.timeline-item-date,.timeline-item-dateinner{-webkit-clip-path:polygon(0 0,95% 0,100% 50%,95% 100%,0 100%);clip-path:polygon(0 0,95% 0,100% 50%,95% 100%,0 100%)}.timeline-item-dateinner{background:#e86971;color:#fff;padding:0;font-size:16px;font-weight:700;margin:0;border-right-color:transparent;height:50px;width:100%;display:block;line-height:52px;text-indent:15px}.timeline-item--no-children .body-container:before{display:none}.entry{clear:both;text-align:left;position:relative}.timeline--animate .entry .is-hidden{visibility:hidden}.timeline--animate .entry .bounce-in{visibility:visible;animation:bounce-in .4s}.entry .title{margin-bottom:.5em;float:left;width:34%;position:relative;height:32px}.entry .title:before{content:"";position:absolute;width:8px;height:8px;border:4px solid;background-color:#fff;border-radius:100%;top:15%;right:-8px;z-index:99;box-sizing:content-box}.entry .body{margin:0 0 3em;float:right;width:66%;color:#333}.entry .body p{line-height:1.4em}.entry .body h1,.entry .body h2,.entry .body h3,.entry .body h4,.entry .body h5,.entry .body h6{margin:0}.entry .body p:first-child{margin-top:0;font-weight:400}@keyframes bounce-in{0%{opacity:0;transform:scale(.5)}to{transform:scale(1)}}@media only screen and (max-width:768px){.entry .title{float:left;width:70%}.timeline-item-date{margin-left:30px}.entry .title:before{top:15%;left:3px;right:auto;z-index:99}.entry .body{margin:20px 0 3em;float:right;width:99%}}.timelineContainer .timelineKey{list-style-type:none;height:50px}.timelineContainer .timelineKey li{float:left;list-style:none;text-align:center;margin:10px;min-width:75px;padding:10px;border:1px #000;border-radius:5px;color:#fff;font-weight:800}.timelineContainer .timelineKey:after,.timelineContainer p{clear:both}.timelineContainer .header{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:20px auto auto}.timelineContainer .timeline--wrapper .timelineKey li{margin-left:10px;min-width:50px;font-size:80%}.timelineContainer .timeline--wrapper h3,.timelineContainer .timeline--wrapper h4,.timelineContainer .timeline--wrapper h5,.timelineContainer .timeline--wrapper h6{clear:both;margin-top:10px}table,td,th{border:1px solid #a9a9a9}table td,table th,td td,td th,th td,th th{padding:10px}code[class*=css]{padding:2px;border-radius:3px;font-size:13px;background-color:rgba(194,214,216,.21)}</style><meta name="generator" content="Gatsby 2.19.41"/><title data-react-helmet="true">commands | New Relic Flex</title><meta data-react-helmet="true" name="title" content="commands | New Relic Flex"/><meta data-react-helmet="true" name="description" content="commands The  commands  API allows you to retrieve information from any application or shell command. It can accept multiple commandsâ€¦"/><link as="script" rel="preload" href="/flex/webpack-runtime-bdd42a54ee89c0f86ad2.js"/><link as="script" rel="preload" href="/flex/commons-888c9dc189c564b25dd6.js"/><link as="script" rel="preload" href="/flex/app-eb5f26ddba685cba0646.js"/><link as="script" rel="preload" href="/flex/styles-681667273b3b2449dac4.js"/><link as="script" rel="preload" href="/flex/component---node-modules-gatsby-theme-documentation-src-templates-doc-js-dde5070b4499b702fe02.js"/><link as="fetch" rel="preload" href="/flex/page-data/apis/commands/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/flex/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
        var mode = localStorage.getItem('theme-ui-color-mode');
        if (!mode) return
        document.body.classList.add('theme-ui-' + mode);
      } catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="1uszr1r">body{--theme-ui-colors-text:var(--theme-ui-colors-text,rgb(70,78,78));--theme-ui-colors-background:var(--theme-ui-colors-background,#fff);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#007E8A);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#007E8A);--theme-ui-colors-muted:var(--theme-ui-colors-muted,#f6f6f6);--theme-ui-colors-highlight:var(--theme-ui-colors-highlight,#ffffcc);--theme-ui-colors-gray:var(--theme-ui-colors-gray,#777);--theme-ui-colors-purple:var(--theme-ui-colors-purple,#609);--theme-ui-colors-heading:var(--theme-ui-colors-heading,#000d0d);color:var(--theme-ui-colors-text,var(--theme-ui-colors-text,rgb(70,78,78)));background-color:var(--theme-ui-colors-background,var(--theme-ui-colors-background,#fff));}body.theme-ui-dark{--theme-ui-colors-text:var(--theme-ui-colors-modes-dark-text,#D8DEE9);--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#2E3440);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#70ccd2);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,#70ccd2);--theme-ui-colors-muted:var(--theme-ui-colors-modes-dark-muted,#c2d6d82e);--theme-ui-colors-highlight:var(--theme-ui-colors-modes-dark-highlight,#ffffcc);--theme-ui-colors-gray:var(--theme-ui-colors-modes-dark-gray,#999);--theme-ui-colors-purple:var(--theme-ui-colors-modes-dark-purple,#c0f);--theme-ui-colors-heading:var(--theme-ui-colors-modes-dark-heading,#fafbfb);}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1c7xwul">.css-1c7xwul{font-family:Open Sans;line-height:1.65;font-weight:400;font-size:14px;}</style><div class="css-1c7xwul"><style data-emotion-css="1g8fzna">body{margin:0;color:rgb(70,78,78);background-color:#fff;}</style><style data-emotion-css="1svsvwq">.css-1svsvwq{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><style data-emotion-css="1eiazfv">.css-1eiazfv{box-sizing:border-box;min-width:0;min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="css-1eiazfv"><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><style data-emotion-css="80zs6q">.css-80zs6q{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><header class="css-80zs6q"><style data-emotion-css="1wlb98n">.css-1wlb98n{width:100%;min-width:0;max-width:1024px;margin-left:auto;margin-right:auto;padding:16px;}</style><style data-emotion-css="10qzsxd">.css-10qzsxd{box-sizing:border-box;min-width:0;width:100%;min-width:0;max-width:1024px;margin-left:auto;margin-right:auto;padding:16px;}</style><div class="css-10qzsxd"><style data-emotion-css="x4dmss">.css-x4dmss{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><style data-emotion-css="gg4vpm">.css-gg4vpm{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><style data-emotion-css="17xq3pr">.css-17xq3pr{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="css-17xq3pr"><style data-emotion-css="15n6723">.css-15n6723{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}.css-15n6723 h1{margin:0;}.css-15n6723 ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-15n6723 li{margin-left:16px;}</style><style data-emotion-css="1dyk7ms">.css-1dyk7ms{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}.css-1dyk7ms h1{margin:0;}.css-1dyk7ms ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-1dyk7ms li{margin-left:16px;}</style><style data-emotion-css="18jt5me">.css-18jt5me{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}.css-18jt5me h1{margin:0;}.css-18jt5me ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-18jt5me li{margin-left:16px;}</style><div class="css-18jt5me"><style data-emotion-css="1bmf9ul">.css-1bmf9ul{font-family:inherit;font-size:24px;color:inherit;background-color:transparent;width:32px;height:32px;padding:4px;margin:0;border:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;}.css-1bmf9ul:focus{outline:2px solid;}@media screen and (min-width:40em){.css-1bmf9ul{display:none;}}</style><button title="Toggle Menu" class="css-1bmf9ul"><style data-emotion-css="1i2z6sa">.css-1i2z6sa{display:block;margin:0;}</style><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentcolor" viewBox="0 0 24 24" class="css-1i2z6sa"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button><a href="#"><img style="width:50%" src="/flex/static/logo-de6d77d5c41683b1c6be49f0eaa558da.png"/></a><style data-emotion-css="rjaevg">.css-rjaevg{fonts:Open Sans;color:var(--theme-ui-colors-text,rgb(70,78,78));}</style><ul class="css-rjaevg"><li class="css-0"><style data-emotion-css="1u4lcrw">.css-1u4lcrw{display:block;padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;color:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:14px;font-weight:bold;}.css-1u4lcrw.active{color:var(--theme-ui-colors-primary,#007E8A);}</style><a href="https://github.com/newrelic/nri-flex" class="css-1u4lcrw">GitHub</a></li></ul><style data-emotion-css="1isemmb">.css-1isemmb{margin-left:8px;}</style><style data-emotion-css="v8ekc9">.css-v8ekc9{-webkit-appearance:none;-moz-appearance:none;appearance:none;font-family:inherit;font-size:14px;font-weight:bold;margin:0;padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;color:var(--theme-ui-colors-text,rgb(70,78,78));background-color:var(--theme-ui-colors-muted,#f6f6f6);border:0;border-radius:2px;margin-left:8px;}.css-v8ekc9:focus{outline:2px solid;}</style><button class="css-v8ekc9">light</button></div></div></div></header><style data-emotion-css="11qjisw">.css-11qjisw{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><style data-emotion-css="3url3g">.css-3url3g{box-sizing:border-box;min-width:0;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><main class="css-3url3g"><div class="css-10qzsxd"><style data-emotion-css="xs5at7">.css-xs5at7{display:block;margin-left:-16px;margin-right:-16px;}@media screen and (min-width:40em){.css-xs5at7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><div class="css-xs5at7"><style data-emotion-css="1k3sxxw">@media screen and (min-width:40em){.css-1k3sxxw{display:block;}}</style><style data-emotion-css="14923id">.css-14923id{width:256px;-webkit-flex:none;-ms-flex:none;flex:none;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:32px;margin-top:64px;}@media screen and (min-width:40em){.css-14923id{margin-top:0;}}@media screen and (min-width:40em){.css-14923id{display:block;}}</style><div><style data-emotion-css="ak1r2o">.css-ak1r2o{position:fixed;top:0;left:0;bottom:0;z-index:1;min-width:0;width:256px;max-height:100vh;overflow-x:visible;overflow-y:auto;-webkit-overflow-scrolling:touch;-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translate(-100%);-ms-transform:translate(-100%);transform:translate(-100%);background-color:var(--theme-ui-colors-background,#fff);width:256px;-webkit-flex:none;-ms-flex:none;flex:none;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:32px;margin-top:64px;}@media screen and (min-width:40em){.css-ak1r2o{position:-webkit-sticky;position:sticky;bottom:auto;max-height:none;-webkit-transform:none;-ms-transform:none;transform:none;background-color:transparent;}}@media screen and (min-width:40em){.css-ak1r2o{margin-top:0;}}@media screen and (min-width:40em){.css-ak1r2o{display:block;}}</style><div class="css-ak1r2o"><style data-emotion-css="1rvtlej">.css-1rvtlej{list-style:none;padding:0;margin:0;}</style><ul class="css-1rvtlej"><li><style data-emotion-css="70qvj9">.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-70qvj9"><a class="css-1u4lcrw" href="/flex/">Home</a></div></li><li><div class="css-70qvj9"><a class="css-1u4lcrw" href="/flex/basic-tutorial">Step-by-step Tutorial</a></div></li><li><div class="css-70qvj9"><a class="css-1u4lcrw" href="/flex/configure">Flex configuration</a></div></li><li><div class="css-70qvj9"><a class="css-1u4lcrw" href="/flex/flex/apis">Data sources</a><style data-emotion-css="zdpt2t">.css-zdpt2t{margin-left:auto;}</style><style data-emotion-css="oebpb0">.css-oebpb0{-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px;margin:0;border:0;border-radius:0;color:inherit;background-color:transparent;margin-left:auto;}.css-oebpb0:hover,.css-oebpb0:focus{color:var(--theme-ui-colors-primary,#007E8A);}</style><button title="Expand Section" class="css-oebpb0"><svg viewBox="0 0 16 16" width="16" height="16"><style data-emotion-css="1p6iz05">.css-1p6iz05{-webkit-transform-origin:8 8;-ms-transform-origin:8 8;transform-origin:8 8;-webkit-transition:-webkit-transform .1s ease-out;-webkit-transition:transform .1s ease-out;transition:transform .1s ease-out;}</style><g transform="rotate(0 8 8)" class="css-1p6iz05"><path stroke="currentcolor" stroke-width="2" fill="none" d="M14 6 L8 12 L2 6"></path></g></svg></button></div></li><li><div class="css-70qvj9"><a class="css-1u4lcrw" href="/flex/functions">Data parsing and transformation functions</a><button title="Expand Section" class="css-oebpb0"><svg viewBox="0 0 16 16" width="16" height="16"><g transform="rotate(0 8 8)" class="css-1p6iz05"><path stroke="currentcolor" stroke-width="2" fill="none" d="M14 6 L8 12 L2 6"></path></g></svg></button></div></li><li><div class="css-70qvj9"><a class="css-1u4lcrw" href="/flex/development">Development guide</a></div></li></ul></div></div><style data-emotion-css="7w1bm1">.css-7w1bm1{overflow:hidden;padding-left:16px;padding-right:16px;}</style><div class="css-7w1bm1"><style data-emotion-css="cw76jc">.css-cw76jc{font-family:inherit;font-weight:600;line-height:1.25;font-size:32px;margin-top:16px;color:var(--theme-ui-colors-heading,#000d0d);}.css-cw76jc a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}</style><h1 id="commands" class="css-cw76jc"><style data-emotion-css="1vpgvkl">.css-1vpgvkl{font-family:Menlo,monospace;color:var(--theme-ui-colors-secondary,#007E8A);background-color:var(--theme-ui-colors-muted,#f6f6f6);}</style><code class="css-1vpgvkl">commands</code></h1><p class="css-rjaevg">The <code class="css-1vpgvkl">commands</code> API allows you to retrieve information from any application or shell command. It can accept multiple commands executed in sequence.</p><ul class="css-rjaevg"><li class="css-0"><style data-emotion-css="jy6qzv">.css-jy6qzv{color:var(--theme-ui-colors-primary,#007E8A);}.css-jy6qzv:hover{color:var(--theme-ui-colors-secondary,#007E8A);}</style><a href="#Basicusage" class="css-jy6qzv">Basic usage</a></li><li class="css-0"><a href="#Configurationproperties" class="css-jy6qzv">Configuration properties</a></li><li class="css-0"><a href="#Advancedusage" class="css-jy6qzv">Advanced usage</a></li></ul><style data-emotion-css="1jjzpo2">.css-1jjzpo2{font-family:inherit;font-weight:600;line-height:1.25;font-size:24px;color:var(--theme-ui-colors-text,rgb(70,78,78));}.css-1jjzpo2 a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}</style><h2 id="a-namebasicusageabasic-usage" class="css-1jjzpo2"><a name="Basicusage" class="css-jy6qzv"></a>Basic usage</h2><style data-emotion-css="73tpx7">.css-73tpx7{font-family:Menlo,monospace;font-size:14px;padding:16px;color:var(--theme-ui-colors-text,rgb(70,78,78));background-color:var(--theme-ui-colors-muted,#f6f6f6);overflow:auto;}.css-73tpx7 .comment,.css-73tpx7 .prolog,.css-73tpx7 .doctype,.css-73tpx7 .cdata,.css-73tpx7 .punctuation,.css-73tpx7 .operator,.css-73tpx7 .entity,.css-73tpx7 .url{color:var(--theme-ui-colors-gray,#777);}.css-73tpx7 .comment{font-style:italic;}.css-73tpx7 .property,.css-73tpx7 .tag,.css-73tpx7 .boolean,.css-73tpx7 .number,.css-73tpx7 .constant,.css-73tpx7 .symbol,.css-73tpx7 .deleted,.css-73tpx7 .function,.css-73tpx7 .class-name,.css-73tpx7 .regex,.css-73tpx7 .important,.css-73tpx7 .variable{color:var(--theme-ui-colors-purple,#609);}.css-73tpx7 .atrule,.css-73tpx7 .attr-value,.css-73tpx7 .keyword{color:var(--theme-ui-colors-primary,#007E8A);}.css-73tpx7 .selector,.css-73tpx7 .attr-name,.css-73tpx7 .string,.css-73tpx7 .char,.css-73tpx7 .builtin,.css-73tpx7 .inserted{color:var(--theme-ui-colors-secondary,#007E8A);}.css-73tpx7 code{color:inherit;}</style><style data-emotion-css="1pwvmy5">.css-1pwvmy5{font-family:Menlo,monospace;color:var(--theme-ui-colors-primary,#007E8A);-background-color:muted;font-size:14px;padding:30px;}</style><style data-emotion-css="k52kr0">.css-k52kr0{font-family:Menlo,monospace;font-size:14px;padding:16px;color:var(--theme-ui-colors-text,rgb(70,78,78));background-color:var(--theme-ui-colors-muted,#f6f6f6);overflow:auto;font-family:Menlo,monospace;color:var(--theme-ui-colors-primary,#007E8A);-background-color:muted;font-size:14px;padding:30px;}.css-k52kr0 .comment,.css-k52kr0 .prolog,.css-k52kr0 .doctype,.css-k52kr0 .cdata,.css-k52kr0 .punctuation,.css-k52kr0 .operator,.css-k52kr0 .entity,.css-k52kr0 .url{color:var(--theme-ui-colors-gray,#777);}.css-k52kr0 .comment{font-style:italic;}.css-k52kr0 .property,.css-k52kr0 .tag,.css-k52kr0 .boolean,.css-k52kr0 .number,.css-k52kr0 .constant,.css-k52kr0 .symbol,.css-k52kr0 .deleted,.css-k52kr0 .function,.css-k52kr0 .class-name,.css-k52kr0 .regex,.css-k52kr0 .important,.css-k52kr0 .variable{color:var(--theme-ui-colors-purple,#609);}.css-k52kr0 .atrule,.css-k52kr0 .attr-value,.css-k52kr0 .keyword{color:var(--theme-ui-colors-primary,#007E8A);}.css-k52kr0 .selector,.css-k52kr0 .attr-name,.css-k52kr0 .string,.css-k52kr0 .char,.css-k52kr0 .builtin,.css-k52kr0 .inserted{color:var(--theme-ui-colors-secondary,#007E8A);}.css-k52kr0 code{color:inherit;}</style><pre class="language-yaml prism-code language-yaml css-k52kr0"><div class="token-line"><style data-emotion-css="1baulvz">.css-1baulvz{display:inline-block;}</style><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> example</span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token key atrule css-1baulvz">apis</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> linuxDirectorySize</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">commands</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> du </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">c /somedir</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> horizontal</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">set_header</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">[</span><span class="token plain css-1baulvz">dirSizeBytes</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">dirName</span><span class="token punctuation css-1baulvz">]</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">regex_match</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token boolean important css-1baulvz">true</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> (\d+)\s+(.*)</span></div></pre><p class="css-rjaevg">This configuration retrieves the raw output provided by the command defined in <code class="css-1vpgvkl">run</code>, which outputs a pair of values: the directory size, and the directory name. It also informs Flex that the output is horizontally formatted and has two columns as defined in <code class="css-1vpgvkl">set_header</code>. Finally, it extracts the values using the regex expression defined in <code class="css-1vpgvkl">split_by</code>, and assigns to each of the columns set in <code class="css-1vpgvkl">set_header</code>.</p><h2 id="a-nameconfigurationpropertiesaconfiguration-properties" class="css-1jjzpo2"><a name="Configurationproperties" class="css-jy6qzv"></a>Configuration properties</h2><p class="css-rjaevg">The following table describes the properties of the <code class="css-1vpgvkl">commands</code> API. The API accepts a list of commands, each requiring a <code class="css-1vpgvkl">run</code> directive.</p><style data-emotion-css="l7gp9f">.css-l7gp9f{width:100%;margin-top:32px;margin-bottom:32px;border-collapse:separate;border-spacing:0;}.css-l7gp9f th,.css-l7gp9f td{text-align:left;padding-top:4px;padding-bottom:4px;padding-right:4px;padding-left:0;border-color:var(--theme-ui-colors-muted,#f6f6f6);border-bottom-style:solid;}</style><table class="css-l7gp9f"><thead><tr class="css-0"><style data-emotion-css="v8il07">.css-v8il07{vertical-align:bottom;border-bottom-width:2px;}</style><th class="css-v8il07">Name</th><th class="css-v8il07">Type</th><th class="css-v8il07">Default</th><th class="css-v8il07">Description</th></tr></thead><tbody><tr class="css-0"><style data-emotion-css="15msde0">.css-15msde0{vertical-align:top;border-bottom-width:1px;}</style><td class="css-15msde0"><code class="css-1vpgvkl">run</code></td><td class="css-15msde0">string</td><td class="css-15msde0"></td><td class="css-15msde0">Command or application that you want to run. It accepts any valid shell command. You can also use environment variables with the format <code class="css-1vpgvkl">$$ENV_VAR_NAME</code></td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">shell</code></td><td class="css-15msde0">string</td><td class="css-15msde0"><code class="css-1vpgvkl">/bin/sh</code> (Linux) <code class="css-1vpgvkl">cmd</code> (Windows)</td><td class="css-15msde0">Shell to use when executing the command defined in <code class="css-1vpgvkl">run</code>. All native Linux shells, Windows CMD, and Windows PowerShell v1-5.x (<code class="css-1vpgvkl">powershell</code>) and v6+ (<code class="css-1vpgvkl">pwsh</code>) are supported.</td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">split</code></td><td class="css-15msde0">string</td><td class="css-15msde0"><code class="css-1vpgvkl">vertical</code></td><td class="css-15msde0">Mode of processing of the command output, either vertical with one value per line, or horizontal with more than one value per line (table format). Only used when <code class="css-1vpgvkl">ignore_output</code> is false</td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">split_by</code></td><td class="css-15msde0">string</td><td class="css-15msde0"></td><td class="css-15msde0">Regular expression used to process metric data</td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">regex_match</code></td><td class="css-15msde0">string</td><td class="css-15msde0"></td><td class="css-15msde0">Whether the regular expression defined in <code class="css-1vpgvkl">split_by</code> should be interpreted as a match expression (<code class="css-1vpgvkl">true</code>) or as a split expression (<code class="css-1vpgvkl">false</code>)</td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">row_header</code></td><td class="css-15msde0">int</td><td class="css-15msde0"><code class="css-1vpgvkl">0</code></td><td class="css-15msde0">Line that contains the header. Only applies if the value is not equal to <code class="css-1vpgvkl">row_header</code> and is greater than or equal to <code class="css-1vpgvkl">1</code></td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">row_start</code></td><td class="css-15msde0">int</td><td class="css-15msde0"><code class="css-1vpgvkl">0</code></td><td class="css-15msde0">Line number where Flex starts processing metric data. If <code class="css-1vpgvkl">split</code> is set to <code class="css-1vpgvkl">horizontal</code>, <code class="css-1vpgvkl">row_start</code> is only used if <code class="css-1vpgvkl">row_start</code> is not equal to <code class="css-1vpgvkl">row_header</code> and <code class="css-1vpgvkl">row_start</code> is greater than or equal to <code class="css-1vpgvkl">1</code></td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">line_start</code></td><td class="css-15msde0">int</td><td class="css-15msde0"><code class="css-1vpgvkl">0</code></td><td class="css-15msde0">Line number where Flex will start processing data. If <code class="css-1vpgvkl">split</code> is set to <code class="css-1vpgvkl">horizontal</code> and <code class="css-1vpgvkl">row_start</code> is defined, <code class="css-1vpgvkl">line_start</code> will only be used if <code class="css-1vpgvkl">line_start</code> is not equal to <code class="css-1vpgvkl">row_header</code> and <code class="css-1vpgvkl">line_start</code> is greater than or equal to <code class="css-1vpgvkl">1</code>. If both <code class="css-1vpgvkl">row_start</code> and <code class="css-1vpgvkl">line_start</code> are defined, <code class="css-1vpgvkl">line_start</code> takes precedence</td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">line_end</code></td><td class="css-15msde0">int</td><td class="css-15msde0"><code class="css-1vpgvkl">0</code></td><td class="css-15msde0">Line number (exclusive) at which Flex stops processing data. Only applies if <code class="css-1vpgvkl">split</code> is not equal to <code class="css-1vpgvkl">horizontal</code></td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">set_header</code></td><td class="css-15msde0">array of strings</td><td class="css-15msde0"><code class="css-1vpgvkl">[]</code></td><td class="css-15msde0">Name and number of columns Flex should extract data from. Only applies if <code class="css-1vpgvkl">split</code> is equal to <code class="css-1vpgvkl">horizontal</code></td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">header_regex_match</code></td><td class="css-15msde0">bool</td><td class="css-15msde0"><code class="css-1vpgvkl">false</code></td><td class="css-15msde0">Whether the regular expression in <code class="css-1vpgvkl">header_split_by</code> should be interpreted as a match expression (<code class="css-1vpgvkl">true</code>) or as a split expression (<code class="css-1vpgvkl">false</code>). Applies only if <code class="css-1vpgvkl">split</code> is equal to <code class="css-1vpgvkl">horizontal</code></td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">header_split_by</code></td><td class="css-15msde0">string</td><td class="css-15msde0"></td><td class="css-15msde0">Regular expression applied to the header line. Applies only if <code class="css-1vpgvkl">split</code> is equal to <code class="css-1vpgvkl">horizontal</code></td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">split_output</code></td><td class="css-15msde0">string</td><td class="css-15msde0"></td><td class="css-15msde0">Regular expression used to split the output into blocks of data</td></tr><tr class="css-0"><td class="css-15msde0"><code class="css-1vpgvkl">timeout</code></td><td class="css-15msde0">int</td><td class="css-15msde0"><code class="css-1vpgvkl">10</code></td><td class="css-15msde0">Time to wait for the command to execute. If the command takes longer than <code class="css-1vpgvkl">timeout</code>, Flex ignores the output and returns an error. Note that Flex waits for the command to stop by itself</td></tr></tbody></table><h2 id="a-nameadvancedusageaadvanced-usage" class="css-1jjzpo2"><a name="Advancedusage" class="css-jy6qzv"></a>Advanced usage</h2><p class="css-rjaevg">The <code class="css-1vpgvkl">commands</code> API accepts additional format directives to better parse the output.</p><style data-emotion-css="hyh5rg">.css-hyh5rg{font-family:inherit;font-weight:600;line-height:1.25;font-size:20px;color:var(--theme-ui-colors-text,rgb(70,78,78));}.css-hyh5rg a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}</style><h3 id="a-namerawdataparsingaraw-data-parsing" class="css-hyh5rg"><a name="Rawdataparsing" class="css-jy6qzv"></a>Raw data parsing</h3><p class="css-rjaevg">In the example below, the output from the <code class="css-1vpgvkl">df</code> command is treated as a table with a header. We instruct Flex to extract values using a regex split expression; in this particular case, the regex expression tells Flex that the values are separated by spaces. Value are then assigned in order of appearance to the corresponding keys.</p><pre class="language-yaml prism-code language-yaml css-k52kr0"><div class="token-line"><span class="token punctuation css-1baulvz">---</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> example</span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token key atrule css-1baulvz">apis</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> diskFree</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">commands</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> df </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">T</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> horizontal</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">set_header</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">[</span><span class="token plain css-1baulvz">fs</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">fsType</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">blocks</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">usedBytes</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">availableBytes</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">usedPerc</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">mountedOn</span><span class="token punctuation css-1baulvz">]</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">row_start</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">1</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> \s+</span></div></pre><p class="css-rjaevg">In this next example, we don&#x27;t specify the keys to which the values will be assigned and instead use a regex expression to extract the keys from the header. Since we are not specifying the header row number neither the values start row, Flex assumes the first row is the header and the next lines are the value rows.</p><pre class="language-yaml prism-code language-yaml css-k52kr0"><div class="token-line"><span class="token punctuation css-1baulvz">---</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> example</span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token key atrule css-1baulvz">apis</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> diskFree</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">commands</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> df </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">T</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">header_split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> \s+</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> horizontal</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">regex_match</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token boolean important css-1baulvz">true</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> (\S+)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)%\s+(\d+)\s+(\d+)\s+(\d+)%\s+(.*)</span></div></pre><p class="css-rjaevg">To extract the values we use a regex expression in <code class="css-1vpgvkl">split_by</code>. Note that in this case we extract the names of the metric attributes from raw data, so we must be sure that those are correct.</p><h3 id="a-namespecifytheshellaspecify-the-shell" class="css-hyh5rg"><a name="Specifytheshell" class="css-jy6qzv"></a>Specify the shell</h3><p class="css-rjaevg">All commands are executed using <code class="css-1vpgvkl">/bin/sh</code> (Linux) or <code class="css-1vpgvkl">cmd</code> (Windows). If you want to use a different shell, you can specify it at API level for all commands, or at command level, which overrides values set at the API level.</p><p class="css-rjaevg">In the example below, <code class="css-1vpgvkl">/bin/zsh</code> applies only to <code class="css-1vpgvkl">some_other_command</code>, since <code class="css-1vpgvkl">shell: /bin/bash</code> overrides the API level statement for <code class="css-1vpgvkl">df -T</code>.</p><pre class="language-yaml prism-code language-yaml css-k52kr0"><div class="token-line"><span class="token punctuation css-1baulvz">---</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> example</span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token key atrule css-1baulvz">apis</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> diskFree</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">shell</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> /bin/zsh</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">commands</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> df </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">T</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">shell</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> /bin/bash</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">header_split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> \s+</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> horizontal</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">regex_match</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token boolean important css-1baulvz">true</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> (\S+)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)%\s+(\d+)\s+(\d+)\s+(\d+)%\s+(.*)</span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> some_other_command</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> \s+</span></div></pre><h3 id="a-namespecifyatimeoutaspecify-a-timeout" class="css-hyh5rg"><a name="Specifyatimeout" class="css-jy6qzv"></a>Specify a timeout</h3><p class="css-rjaevg">Flex defines a 10 second timeout for each command by default. If the command does not complete within the timeout period, Flex stops processing the current command and moves to the next. You can change the timeout at both API and command levels. Timeout values are specified in milliseconds (for example, 15 seconds are specified as <code class="css-1vpgvkl">15000</code>).</p><pre class="language-yaml prism-code language-yaml css-k52kr0"><div class="token-line"><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> example</span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token key atrule css-1baulvz">apis</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> linuxTimeout</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">timeout</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">5000</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">shell</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> /bin/sh</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">commands</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> sleep 10</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> timesOut</span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> sleep 3</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> doesNotTimeout</span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> sleep 10</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> alsoDoesNotTimeout</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">timeout</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">15000</span></div></pre><p class="css-rjaevg">In the example above we declare three commands. The timeout value of <code class="css-1vpgvkl">5000</code> declared at the API level applies to all commands except <code class="css-1vpgvkl">alsoDoesNotTimeout</code>, which has its own <code class="css-1vpgvkl">timeout</code> statement. Note that Flex will return an error for the first command:</p><pre class="prism-code language-css-1pwvmy5 css-k52kr0"><div class="token-line"><span class="token plain css-1baulvz">command: timed out err=&quot;context deadline exceeded&quot; exec=&quot;sleep 10&quot;`)</span></div></pre><h3 id="a-namesplittheoutputasplit-the-output" class="css-hyh5rg"><a name="Splittheoutput" class="css-jy6qzv"></a>Split the output</h3><p class="css-rjaevg">In case the output of the command is not a sequential list of lines/values, use <code class="css-1vpgvkl">split_output</code> to separate results into blocks that are to be processed sequentially. The directive accepts a regex expression for splitting the output into blocks. You can either use a list of regex expressions to extract data from each block, or try raw processing using <code class="css-1vpgvkl">split_by</code>:</p><pre class="language-yaml prism-code language-yaml css-k52kr0"><div class="token-line"><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> example</span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token key atrule css-1baulvz">apis</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> splitOutput</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">commands</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> echo &quot;key</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz">value&quot; &amp;&amp; echo &quot;</span><span class="token punctuation css-1baulvz">---</span><span class="token plain css-1baulvz">&quot; &amp;&amp; echo &quot;other_key</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz">otherValue&quot;</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split_output</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">---</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">regex_matches</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">          </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">expression</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> \S</span><span class="token important css-1baulvz">*key</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz">(\w+)</span></div><div class="token-line"><span class="token plain css-1baulvz">            </span><span class="token key atrule css-1baulvz">keys</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">[</span><span class="token plain css-1baulvz">value</span><span class="token punctuation css-1baulvz">]</span></div></pre><p class="css-rjaevg">If you run the command defined in the <code class="css-1vpgvkl">run</code> directive, you get the following result:</p><pre class="language-text prism-code language-text css-k52kr0"><div class="token-line"><span class="token plain css-1baulvz">key:value</span></div><div class="token-line"><span class="token plain css-1baulvz">---</span></div><div class="token-line"><span class="token plain css-1baulvz">other_key:otherValue</span></div></pre><p class="css-rjaevg">The <code class="css-1vpgvkl">split_output</code> command as defined above gets two blocks of data to which Flex then applies the <code class="css-1vpgvkl">regex_matches</code> expressions for extracting the values. This example results in two metric samples:</p><pre class="language-json prism-code language-json css-k52kr0"><div class="token-line"><span class="token punctuation css-1baulvz">[</span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token property css-1baulvz">&quot;event_type&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;splitOutputSample&quot;</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token property css-1baulvz">&quot;integration_name&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;com.newrelic.nri-flex&quot;</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token property css-1baulvz">&quot;value&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;value&quot;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token punctuation css-1baulvz">}</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token property css-1baulvz">&quot;event_type&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;splitOutputSample&quot;</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token property css-1baulvz">&quot;integration_name&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;com.newrelic.nri-flex&quot;</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token property css-1baulvz">&quot;value&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;otherValue&quot;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token punctuation css-1baulvz">}</span><span class="token punctuation css-1baulvz">]</span></div></pre><h3 id="a-namemanuallyspecifyblocksofdatatoprocessamanually-specify-blocks-of-data-to-process" class="css-hyh5rg"><a name="Manuallyspecifyblocksofdatatoprocess" class="css-jy6qzv"></a>Manually specify blocks of data to process</h3><p class="css-rjaevg">If you know at which line the relevant data starts and where it ends, you can use <code class="css-1vpgvkl">line_start</code> and <code class="css-1vpgvkl">line_end</code> (optional) to limit the data processing to a specific number of lines from the output.</p><pre class="language-yml prism-code language-yml css-k52kr0"><div class="token-line"><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> example</span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token key atrule css-1baulvz">apis</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> lineStart</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">commands</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> echo &quot;this is noise&quot; &amp;&amp; echo &quot;key</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz">value&quot;</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">line_start</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">1</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;:&quot;</span></div></pre><p class="css-rjaevg">In the example above, we only want to process data after the first (<code class="css-1vpgvkl">0</code>) line, so we set <code class="css-1vpgvkl">line_start</code> to <code class="css-1vpgvkl">1</code>. If we know that after a specific line the data is not useful, we can limit the set of lines Flex processes by adding <code class="css-1vpgvkl">line_end</code>:</p><pre class="language-yml prism-code language-yml css-k52kr0"><div class="token-line"><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> example</span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token key atrule css-1baulvz">apis</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> lineStart</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">commands</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> echo &quot;this is noise&quot; &amp;&amp; echo &quot;key</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz">value&quot; &amp;&amp; echo &quot;otherKey</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz">otherValue&quot; &amp;&amp; echo &quot;more noise&quot;</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">line_start</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">1</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">line_end</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">3</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;:&quot;</span></div></pre><p class="css-rjaevg">Note that <code class="css-1vpgvkl">line_end</code> is exclusive, meaning that you have to add <code class="css-1vpgvkl">1</code> (<code class="css-1vpgvkl">0</code> indexed) to the actual line you want to stop being processed.</p></div></div></div></main></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/apis/commands";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-eb5f26ddba685cba0646.js"],"component---node-modules-gatsby-theme-documentation-src-templates-doc-js":["/component---node-modules-gatsby-theme-documentation-src-templates-doc-js-dde5070b4499b702fe02.js"]};/*]]>*/</script><script src="/flex/component---node-modules-gatsby-theme-documentation-src-templates-doc-js-dde5070b4499b702fe02.js" async=""></script><script src="/flex/styles-681667273b3b2449dac4.js" async=""></script><script src="/flex/app-eb5f26ddba685cba0646.js" async=""></script><script src="/flex/commons-888c9dc189c564b25dd6.js" async=""></script><script src="/flex/webpack-runtime-bdd42a54ee89c0f86ad2.js" async=""></script></body></html>