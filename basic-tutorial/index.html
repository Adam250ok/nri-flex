<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/nri-flex/styles.0cd87480fafd4a24e9ad.css">@import url(https://fonts.googleapis.com/css?family=Open+Sans:400,400i,600,600i,700,700i&display=swap);.timeline--wrapper{width:calc(100% - 24px);padding:12px}.timeline{width:100%;max-width:800px;padding:15px 0 0;position:relative;margin:50px auto}.timeline:before{content:"";position:absolute;top:0;left:calc(33% + 6px);bottom:0;width:0;border:2px solid}.timeline:after{content:"";display:table;clear:both}@media only screen and (max-width:768px){.timeline:before{left:calc(1% + 6px)}}.body-container{position:relative;margin-left:30px}.timeline-item--no-children .body-container{background:transparent;box-shadow:none}.body-container:after{content:"";display:table;clear:both}.timeline-item-date{position:absolute;top:-12px;left:0;background:#ddd;padding:1px;height:52px;box-sizing:border-box;width:90%}.timeline-item-date,.timeline-item-dateinner{-webkit-clip-path:polygon(0 0,95% 0,100% 50%,95% 100%,0 100%);clip-path:polygon(0 0,95% 0,100% 50%,95% 100%,0 100%)}.timeline-item-dateinner{background:#e86971;color:#fff;padding:0;font-size:16px;font-weight:700;margin:0;border-right-color:transparent;height:50px;width:100%;display:block;line-height:52px;text-indent:15px}.timeline-item--no-children .body-container:before{display:none}.entry{clear:both;text-align:left;position:relative}.timeline--animate .entry .is-hidden{visibility:hidden}.timeline--animate .entry .bounce-in{visibility:visible;animation:bounce-in .4s}.entry .title{margin-bottom:.5em;float:left;width:34%;position:relative;height:32px}.entry .title:before{content:"";position:absolute;width:8px;height:8px;border:4px solid;background-color:#fff;border-radius:100%;top:15%;right:-8px;z-index:99;box-sizing:content-box}.entry .body{margin:0 0 3em;float:right;width:66%;color:#333}.entry .body p{line-height:1.4em}.entry .body h1,.entry .body h2,.entry .body h3,.entry .body h4,.entry .body h5,.entry .body h6{margin:0}.entry .body p:first-child{margin-top:0;font-weight:400}@keyframes bounce-in{0%{opacity:0;transform:scale(.5)}to{transform:scale(1)}}@media only screen and (max-width:768px){.entry .title{float:left;width:70%}.timeline-item-date{margin-left:30px}.entry .title:before{top:15%;left:3px;right:auto;z-index:99}.entry .body{margin:20px 0 3em;float:right;width:99%}}.timelineContainer .timelineKey{list-style-type:none;height:50px}.timelineContainer .timelineKey li{float:left;list-style:none;text-align:center;margin:10px;min-width:75px;padding:10px;border:1px #000;border-radius:5px;color:#fff;font-weight:800}.timelineContainer .timelineKey:after,.timelineContainer p{clear:both}.timelineContainer .header{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin:20px auto auto}.timelineContainer .timeline--wrapper .timelineKey li{margin-left:10px;min-width:50px;font-size:80%}.timelineContainer .timeline--wrapper h3,.timelineContainer .timeline--wrapper h4,.timelineContainer .timeline--wrapper h5,.timelineContainer .timeline--wrapper h6{clear:both;margin-top:10px}table,td,th{border:1px solid #a9a9a9}table td,table th,td td,td th,th td,th th{padding:10px}code[class*=css]{padding:2px;border-radius:3px;font-size:13px;background-color:rgba(194,214,216,.21)}</style><meta name="generator" content="Gatsby 2.19.41"/><title data-react-helmet="true">Flex step-by-step tutorial | New Relic Flex</title><meta data-react-helmet="true" name="title" content="Flex step-by-step tutorial | New Relic Flex"/><meta data-react-helmet="true" name="description" content="Flex step-by-step tutorial Follow this tutorial to get started with Flex! Install the Infrastructure agent Check that Flex is up and runningâ€¦"/><link as="script" rel="preload" href="/nri-flex/webpack-runtime-a52b415a758b5d1a2854.js"/><link as="script" rel="preload" href="/nri-flex/commons-888c9dc189c564b25dd6.js"/><link as="script" rel="preload" href="/nri-flex/app-97e0e6260861db4891eb.js"/><link as="script" rel="preload" href="/nri-flex/styles-681667273b3b2449dac4.js"/><link as="script" rel="preload" href="/nri-flex/component---node-modules-gatsby-theme-documentation-src-templates-doc-js-d258603698fd7f6478c2.js"/><link as="fetch" rel="preload" href="/nri-flex/page-data/basic-tutorial/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/nri-flex/page-data/app-data.json" crossorigin="anonymous"/></head><body><script>(function() { try {
        var mode = localStorage.getItem('theme-ui-color-mode');
        if (!mode) return
        document.body.classList.add('theme-ui-' + mode);
      } catch (e) {} })();</script><div id="___gatsby"><style data-emotion-css="1uszr1r">body{--theme-ui-colors-text:var(--theme-ui-colors-text,rgb(70,78,78));--theme-ui-colors-background:var(--theme-ui-colors-background,#fff);--theme-ui-colors-primary:var(--theme-ui-colors-primary,#007E8A);--theme-ui-colors-secondary:var(--theme-ui-colors-secondary,#007E8A);--theme-ui-colors-muted:var(--theme-ui-colors-muted,#f6f6f6);--theme-ui-colors-highlight:var(--theme-ui-colors-highlight,#ffffcc);--theme-ui-colors-gray:var(--theme-ui-colors-gray,#777);--theme-ui-colors-purple:var(--theme-ui-colors-purple,#609);--theme-ui-colors-heading:var(--theme-ui-colors-heading,#000d0d);color:var(--theme-ui-colors-text,var(--theme-ui-colors-text,rgb(70,78,78)));background-color:var(--theme-ui-colors-background,var(--theme-ui-colors-background,#fff));}body.theme-ui-dark{--theme-ui-colors-text:var(--theme-ui-colors-modes-dark-text,#D8DEE9);--theme-ui-colors-background:var(--theme-ui-colors-modes-dark-background,#2E3440);--theme-ui-colors-primary:var(--theme-ui-colors-modes-dark-primary,#70ccd2);--theme-ui-colors-secondary:var(--theme-ui-colors-modes-dark-secondary,#70ccd2);--theme-ui-colors-muted:var(--theme-ui-colors-modes-dark-muted,#c2d6d82e);--theme-ui-colors-highlight:var(--theme-ui-colors-modes-dark-highlight,#ffffcc);--theme-ui-colors-gray:var(--theme-ui-colors-modes-dark-gray,#999);--theme-ui-colors-purple:var(--theme-ui-colors-modes-dark-purple,#c0f);--theme-ui-colors-heading:var(--theme-ui-colors-modes-dark-heading,#fafbfb);}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="1c7xwul">.css-1c7xwul{font-family:Open Sans;line-height:1.65;font-weight:400;font-size:14px;}</style><div class="css-1c7xwul"><style data-emotion-css="1g8fzna">body{margin:0;color:rgb(70,78,78);background-color:#fff;}</style><style data-emotion-css="1svsvwq">.css-1svsvwq{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><style data-emotion-css="1eiazfv">.css-1eiazfv{box-sizing:border-box;min-width:0;min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="css-1eiazfv"><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><style data-emotion-css="80zs6q">.css-80zs6q{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><header class="css-80zs6q"><style data-emotion-css="1wlb98n">.css-1wlb98n{width:100%;min-width:0;max-width:1024px;margin-left:auto;margin-right:auto;padding:16px;}</style><style data-emotion-css="10qzsxd">.css-10qzsxd{box-sizing:border-box;min-width:0;width:100%;min-width:0;max-width:1024px;margin-left:auto;margin-right:auto;padding:16px;}</style><div class="css-10qzsxd"><style data-emotion-css="x4dmss">.css-x4dmss{-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><style data-emotion-css="gg4vpm">.css-gg4vpm{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><style data-emotion-css="17xq3pr">.css-17xq3pr{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}</style><div class="css-17xq3pr"><style data-emotion-css="15n6723">.css-15n6723{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}.css-15n6723 h1{margin:0;}.css-15n6723 ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-15n6723 li{margin-left:16px;}</style><style data-emotion-css="1dyk7ms">.css-1dyk7ms{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}.css-1dyk7ms h1{margin:0;}.css-1dyk7ms ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-1dyk7ms li{margin-left:16px;}</style><style data-emotion-css="18jt5me">.css-18jt5me{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}.css-18jt5me h1{margin:0;}.css-18jt5me ul{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;list-style-type:none;}.css-18jt5me li{margin-left:16px;}</style><div class="css-18jt5me"><style data-emotion-css="1bmf9ul">.css-1bmf9ul{font-family:inherit;font-size:24px;color:inherit;background-color:transparent;width:32px;height:32px;padding:4px;margin:0;border:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;}.css-1bmf9ul:focus{outline:2px solid;}@media screen and (min-width:40em){.css-1bmf9ul{display:none;}}</style><button title="Toggle Menu" class="css-1bmf9ul"><style data-emotion-css="1i2z6sa">.css-1i2z6sa{display:block;margin:0;}</style><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentcolor" viewBox="0 0 24 24" class="css-1i2z6sa"><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></button><a href="#"><img style="width:50%" src="/nri-flex/static/logo-de6d77d5c41683b1c6be49f0eaa558da.png"/></a><style data-emotion-css="rjaevg">.css-rjaevg{fonts:Open Sans;color:var(--theme-ui-colors-text,rgb(70,78,78));}</style><ul class="css-rjaevg"><li class="css-0"><style data-emotion-css="1u4lcrw">.css-1u4lcrw{display:block;padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;color:inherit;-webkit-text-decoration:none;text-decoration:none;font-size:14px;font-weight:bold;}.css-1u4lcrw.active{color:var(--theme-ui-colors-primary,#007E8A);}</style><a href="https://github.com/newrelic/nri-flex" class="css-1u4lcrw">GitHub</a></li></ul><style data-emotion-css="1isemmb">.css-1isemmb{margin-left:8px;}</style><style data-emotion-css="v8ekc9">.css-v8ekc9{-webkit-appearance:none;-moz-appearance:none;appearance:none;font-family:inherit;font-size:14px;font-weight:bold;margin:0;padding-left:8px;padding-right:8px;padding-top:8px;padding-bottom:8px;color:var(--theme-ui-colors-text,rgb(70,78,78));background-color:var(--theme-ui-colors-muted,#f6f6f6);border:0;border-radius:2px;margin-left:8px;}.css-v8ekc9:focus{outline:2px solid;}</style><button class="css-v8ekc9">light</button></div></div></div></header><style data-emotion-css="11qjisw">.css-11qjisw{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><style data-emotion-css="3url3g">.css-3url3g{box-sizing:border-box;min-width:0;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><main class="css-3url3g"><div class="css-10qzsxd"><style data-emotion-css="xs5at7">.css-xs5at7{display:block;margin-left:-16px;margin-right:-16px;}@media screen and (min-width:40em){.css-xs5at7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}</style><div class="css-xs5at7"><style data-emotion-css="1k3sxxw">@media screen and (min-width:40em){.css-1k3sxxw{display:block;}}</style><style data-emotion-css="14923id">.css-14923id{width:256px;-webkit-flex:none;-ms-flex:none;flex:none;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:32px;margin-top:64px;}@media screen and (min-width:40em){.css-14923id{margin-top:0;}}@media screen and (min-width:40em){.css-14923id{display:block;}}</style><div><style data-emotion-css="ak1r2o">.css-ak1r2o{position:fixed;top:0;left:0;bottom:0;z-index:1;min-width:0;width:256px;max-height:100vh;overflow-x:visible;overflow-y:auto;-webkit-overflow-scrolling:touch;-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translate(-100%);-ms-transform:translate(-100%);transform:translate(-100%);background-color:var(--theme-ui-colors-background,#fff);width:256px;-webkit-flex:none;-ms-flex:none;flex:none;padding-left:16px;padding-right:16px;padding-top:16px;padding-bottom:32px;margin-top:64px;}@media screen and (min-width:40em){.css-ak1r2o{position:-webkit-sticky;position:sticky;bottom:auto;max-height:none;-webkit-transform:none;-ms-transform:none;transform:none;background-color:transparent;}}@media screen and (min-width:40em){.css-ak1r2o{margin-top:0;}}@media screen and (min-width:40em){.css-ak1r2o{display:block;}}</style><div class="css-ak1r2o"><style data-emotion-css="1rvtlej">.css-1rvtlej{list-style:none;padding:0;margin:0;}</style><ul class="css-1rvtlej"><li><style data-emotion-css="70qvj9">.css-70qvj9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-70qvj9"><a class="css-1u4lcrw" href="/nri-flex/">Home</a></div></li><li><div class="css-70qvj9"><a aria-current="page" class="css-1u4lcrw active" href="/nri-flex/basic-tutorial">Step-by-step Tutorial</a></div></li><li><div class="css-70qvj9"><a class="css-1u4lcrw" href="/nri-flex/configure">Flex configuration</a></div></li><li><div class="css-70qvj9"><a class="css-1u4lcrw" href="/nri-flex/apis">Data sources</a><style data-emotion-css="zdpt2t">.css-zdpt2t{margin-left:auto;}</style><style data-emotion-css="oebpb0">.css-oebpb0{-webkit-appearance:none;-moz-appearance:none;appearance:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:8px;margin:0;border:0;border-radius:0;color:inherit;background-color:transparent;margin-left:auto;}.css-oebpb0:hover,.css-oebpb0:focus{color:var(--theme-ui-colors-primary,#007E8A);}</style><button title="Expand Section" class="css-oebpb0"><svg viewBox="0 0 16 16" width="16" height="16"><style data-emotion-css="1p6iz05">.css-1p6iz05{-webkit-transform-origin:8 8;-ms-transform-origin:8 8;transform-origin:8 8;-webkit-transition:-webkit-transform .1s ease-out;-webkit-transition:transform .1s ease-out;transition:transform .1s ease-out;}</style><g transform="rotate(0 8 8)" class="css-1p6iz05"><path stroke="currentcolor" stroke-width="2" fill="none" d="M14 6 L8 12 L2 6"></path></g></svg></button></div></li><li><div class="css-70qvj9"><a class="css-1u4lcrw" href="/nri-flex/functions">Data parsing and transformation functions</a><button title="Expand Section" class="css-oebpb0"><svg viewBox="0 0 16 16" width="16" height="16"><g transform="rotate(0 8 8)" class="css-1p6iz05"><path stroke="currentcolor" stroke-width="2" fill="none" d="M14 6 L8 12 L2 6"></path></g></svg></button></div></li><li><div class="css-70qvj9"><a class="css-1u4lcrw" href="/nri-flex/development">Development guide</a></div></li></ul></div></div><style data-emotion-css="7w1bm1">.css-7w1bm1{overflow:hidden;padding-left:16px;padding-right:16px;}</style><div class="css-7w1bm1"><style data-emotion-css="cw76jc">.css-cw76jc{font-family:inherit;font-weight:600;line-height:1.25;font-size:32px;margin-top:16px;color:var(--theme-ui-colors-heading,#000d0d);}.css-cw76jc a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}</style><h1 id="flex-step-by-step-tutorial" class="css-cw76jc">Flex step-by-step tutorial</h1><p class="css-rjaevg">Follow this tutorial to get started with Flex!</p><ol class="css-0"><li class="css-0"><style data-emotion-css="jy6qzv">.css-jy6qzv{color:var(--theme-ui-colors-primary,#007E8A);}.css-jy6qzv:hover{color:var(--theme-ui-colors-secondary,#007E8A);}</style><a href="#InstalltheInfrastructureagent" class="css-jy6qzv">Install the Infrastructure agent</a></li><li class="css-0"><a href="#CheckthatFlexisupandrunning" class="css-jy6qzv">Check that Flex is up and running</a></li><li class="css-0"><a href="#YourfirstFlexintegration" class="css-jy6qzv">Your first Flex integration</a></li><li class="css-0"><a href="#Howtoaddmoreintegrations" class="css-jy6qzv">How to add more integrations</a></li><li class="css-0"><a href="#Whatsnext" class="css-jy6qzv">What&#x27;s next?</a></li></ol><style data-emotion-css="1jjzpo2">.css-1jjzpo2{font-family:inherit;font-weight:600;line-height:1.25;font-size:24px;color:var(--theme-ui-colors-text,rgb(70,78,78));}.css-1jjzpo2 a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}</style><h2 id="1-a-nameinstalltheinfrastructureagentainstall-the-infrastructure-agent" class="css-1jjzpo2">1. <a name="InstalltheInfrastructureagent" class="css-jy6qzv"></a>Install the Infrastructure agent</h2><p class="css-rjaevg">Starting from New Relic Infrastructure agent version 1.10.7, Flex comes bundled with the agent. To install the Infrastructure agent, see:</p><ul class="css-rjaevg"><li class="css-0"><a href="https://docs.newrelic.com/docs/infrastructure/install-configure-manage-infrastructure/linux-installation/install-infrastructure-linux-using-package-manager" class="css-jy6qzv">Install Infrastructure for Linux using the package manager</a></li><li class="css-0"><a href="https://docs.newrelic.com/docs/infrastructure/install-configure-manage-infrastructure/windows-installation/install-infrastructure-windows-server-using-msi-installer" class="css-jy6qzv">Install Infrastructure for Windows Server using the MSI installer</a></li></ul><p class="css-rjaevg">You can <a href="https://docs.newrelic.com/docs/infrastructure/new-relic-infrastructure/configuration/start-stop-restart-check-infrastructure-agent-status" class="css-jy6qzv">start, stop, restart, and check</a> the Infrastructure agent from the command line. The agent must run in <a href="https://docs.newrelic.com/docs/infrastructure/install-configure-infrastructure/linux-installation/linux-agent-running-modes" class="css-jy6qzv">root/administrator mode</a>.</p><h2 id="2-a-namecheckthatflexisupandrunningacheck-that-flex-is-up-and-running" class="css-1jjzpo2">2. <a name="CheckthatFlexisupandrunning" class="css-jy6qzv"></a>Check that Flex is up and running</h2><ol class="css-0"><li class="css-0"><p class="css-rjaevg">Navigate to the integrations folder of the Infrastructure agent:</p><ul class="css-rjaevg"><li class="css-0">Linux: <style data-emotion-css="1vpgvkl">.css-1vpgvkl{font-family:Menlo,monospace;color:var(--theme-ui-colors-secondary,#007E8A);background-color:var(--theme-ui-colors-muted,#f6f6f6);}</style><code class="css-1vpgvkl">/etc/newrelic-infra/integrations.d</code></li><li class="css-0">Windows: <code class="css-1vpgvkl">C:\Program Files\New Relic\newrelic-infra\integrations.d\</code></li></ul></li><li class="css-0"><p class="css-rjaevg">Create the integration configuration file (for example, <code class="css-1vpgvkl">integrations.yml</code>) if it doesn&#x27;t exist.</p></li><li class="css-0"><p class="css-rjaevg">Add the Flex configuration to the file.</p><style data-emotion-css="73tpx7">.css-73tpx7{font-family:Menlo,monospace;font-size:14px;padding:16px;color:var(--theme-ui-colors-text,rgb(70,78,78));background-color:var(--theme-ui-colors-muted,#f6f6f6);overflow:auto;}.css-73tpx7 .comment,.css-73tpx7 .prolog,.css-73tpx7 .doctype,.css-73tpx7 .cdata,.css-73tpx7 .punctuation,.css-73tpx7 .operator,.css-73tpx7 .entity,.css-73tpx7 .url{color:var(--theme-ui-colors-gray,#777);}.css-73tpx7 .comment{font-style:italic;}.css-73tpx7 .property,.css-73tpx7 .tag,.css-73tpx7 .boolean,.css-73tpx7 .number,.css-73tpx7 .constant,.css-73tpx7 .symbol,.css-73tpx7 .deleted,.css-73tpx7 .function,.css-73tpx7 .class-name,.css-73tpx7 .regex,.css-73tpx7 .important,.css-73tpx7 .variable{color:var(--theme-ui-colors-purple,#609);}.css-73tpx7 .atrule,.css-73tpx7 .attr-value,.css-73tpx7 .keyword{color:var(--theme-ui-colors-primary,#007E8A);}.css-73tpx7 .selector,.css-73tpx7 .attr-name,.css-73tpx7 .string,.css-73tpx7 .char,.css-73tpx7 .builtin,.css-73tpx7 .inserted{color:var(--theme-ui-colors-secondary,#007E8A);}.css-73tpx7 code{color:inherit;}</style><style data-emotion-css="1pwvmy5">.css-1pwvmy5{font-family:Menlo,monospace;color:var(--theme-ui-colors-primary,#007E8A);-background-color:muted;font-size:14px;padding:30px;}</style><style data-emotion-css="k52kr0">.css-k52kr0{font-family:Menlo,monospace;font-size:14px;padding:16px;color:var(--theme-ui-colors-text,rgb(70,78,78));background-color:var(--theme-ui-colors-muted,#f6f6f6);overflow:auto;font-family:Menlo,monospace;color:var(--theme-ui-colors-primary,#007E8A);-background-color:muted;font-size:14px;padding:30px;}.css-k52kr0 .comment,.css-k52kr0 .prolog,.css-k52kr0 .doctype,.css-k52kr0 .cdata,.css-k52kr0 .punctuation,.css-k52kr0 .operator,.css-k52kr0 .entity,.css-k52kr0 .url{color:var(--theme-ui-colors-gray,#777);}.css-k52kr0 .comment{font-style:italic;}.css-k52kr0 .property,.css-k52kr0 .tag,.css-k52kr0 .boolean,.css-k52kr0 .number,.css-k52kr0 .constant,.css-k52kr0 .symbol,.css-k52kr0 .deleted,.css-k52kr0 .function,.css-k52kr0 .class-name,.css-k52kr0 .regex,.css-k52kr0 .important,.css-k52kr0 .variable{color:var(--theme-ui-colors-purple,#609);}.css-k52kr0 .atrule,.css-k52kr0 .attr-value,.css-k52kr0 .keyword{color:var(--theme-ui-colors-primary,#007E8A);}.css-k52kr0 .selector,.css-k52kr0 .attr-name,.css-k52kr0 .string,.css-k52kr0 .char,.css-k52kr0 .builtin,.css-k52kr0 .inserted{color:var(--theme-ui-colors-secondary,#007E8A);}.css-k52kr0 code{color:inherit;}</style><pre class="language-yaml prism-code language-yaml css-k52kr0"><div class="token-line"><style data-emotion-css="1baulvz">.css-1baulvz{display:inline-block;}</style><span class="token key atrule css-1baulvz">integrations</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> nri</span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">flex</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">config</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> just</span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">testing</span></div></pre><p class="css-rjaevg">If you already have an integrations section in the file, add <code class="css-1vpgvkl">nri-flex</code> to it.</p></li></ol><p class="css-rjaevg">After a few minutes, go to New Relic and run the following <a href="https://docs.newrelic.com/docs/query-data/nrql-new-relic-query-language" class="css-jy6qzv">NRQL query</a>:</p><pre class="language-sql prism-code language-sql css-k52kr0"><div class="token-line"><span class="token keyword css-1baulvz">FROM</span><span class="token plain css-1baulvz"> flexStatusSample </span><span class="token keyword css-1baulvz">SELECT</span><span class="token plain css-1baulvz"> </span><span class="token operator css-1baulvz">*</span><span class="token plain css-1baulvz"> </span><span class="token keyword css-1baulvz">LIMIT</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">1</span></div></pre><p class="css-rjaevg">The query should produce a table similar to this:</p><p class="css-rjaevg"><style data-emotion-css="9whsf3">.css-9whsf3{max-width:100%;}</style><img src="./img/basic-table.png" class="css-9whsf3"/></p><h2 id="3-a-nameyourfirstflexintegrationayour-first-flex-integration" class="css-1jjzpo2">3. <a name="YourfirstFlexintegration" class="css-jy6qzv"></a>Your first Flex integration</h2><p class="css-rjaevg">This example shows how to collect disk metrics from file systems not natively supported by New Relic using the <code class="css-1vpgvkl">df</code> command in Linux.</p><p class="css-rjaevg">The goal of Flex is to process the output of the <code class="css-1vpgvkl">df</code> command, showing the file system and 1-byte blocks, while excluding file systems already supported by the agent. If unsupported file systems are not mounted, remove the <code class="css-1vpgvkl">-x</code> arguments.</p><pre class="language-bash prism-code language-bash css-k52kr0"><div class="token-line"><span class="token plain css-1baulvz">$ </span><span class="token function css-1baulvz">df</span><span class="token plain css-1baulvz"> -PT -B1 -x tmpfs -x xfs -x vxfs -x btrfs -x ext -x ext2 -x ext3 -x ext4</span></div><div class="token-line"><span class="token plain css-1baulvz">Filesystem     Type         1-blocks         Used    Available Capacity Mounted on</span></div><div class="token-line"><span class="token plain css-1baulvz">devtmpfs       devtmpfs    246296576            0    246296576       0% /dev</span></div><div class="token-line"><span class="token plain css-1baulvz">go_src         vboxsf   499963170816 361339486208 138623684608      73% /go/src</span></div></pre><p class="css-rjaevg">We want Flex to convert the above tabular text output into a set of equivalent JSON samples with the following format. Notice that the agent decorates each sample with extra fields:</p><pre class="language-json prism-code language-json css-k52kr0"><div class="token-line"><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token property css-1baulvz">&quot;event&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token property css-1baulvz">&quot;event_type&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;FileSystemSample&quot;</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token property css-1baulvz">&quot;fs&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;go_src&quot;</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token property css-1baulvz">&quot;fsType&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;vboxsf&quot;</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token property css-1baulvz">&quot;capacityBytes&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">499963170816</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token property css-1baulvz">&quot;usedBytes&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">361345331200</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token property css-1baulvz">&quot;availableBytes&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">138617839616</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token property css-1baulvz">&quot;usedPerc&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">73</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token property css-1baulvz">&quot;mountedOn&quot;</span><span class="token operator css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&quot;/go/src&quot;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">}</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token punctuation css-1baulvz">}</span></div></pre><p class="css-rjaevg">First, you need to tell Flex how to perform the above &quot;table text to JSON&quot; transformation by specifying the following:</p><ul class="css-rjaevg"><li class="css-0">Name of the metric: <code class="css-1vpgvkl">FileSystem</code></li><li class="css-0">Which command to run: <code class="css-1vpgvkl">df -PT -B1 ...</code></li><li class="css-0">How to split the output table from <code class="css-1vpgvkl">df</code></li><li class="css-0">How to assign the values to given metric names</li></ul><p class="css-rjaevg">This is achieved by placing the content below in the YAML configuration file:</p><pre class="language-yaml prism-code language-yaml css-k52kr0"><div class="token-line"><span class="token key atrule css-1baulvz">integrations</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> nri</span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">flex</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">config</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> linuxFileSystemIntegration</span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token key atrule css-1baulvz">apis</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> FileSystem</span></div><div class="token-line"><span class="token plain css-1baulvz">          </span><span class="token key atrule css-1baulvz">commands</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">            </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&#x27;df -PT -B1 -x tmpfs -x xfs -x vxfs -x btrfs -x ext -x ext2 -x ext3 -x ext4&#x27;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">              </span><span class="token key atrule css-1baulvz">split</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> horizontal</span></div><div class="token-line"><span class="token plain css-1baulvz">              </span><span class="token key atrule css-1baulvz">split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> \s+</span></div><div class="token-line"><span class="token plain css-1baulvz">              </span><span class="token key atrule css-1baulvz">row_start</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">1</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">              </span><span class="token key atrule css-1baulvz">set_header</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">[</span><span class="token plain css-1baulvz">fs</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">fsType</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">capacityBytes</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">usedBytes</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">availableBytes</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">usedPerc</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">mountedOn</span><span class="token punctuation css-1baulvz">]</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">          </span><span class="token key atrule css-1baulvz">perc_to_decimal</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token boolean important css-1baulvz">true</span></div></pre><ul class="css-rjaevg"><li class="css-0"><code class="css-1vpgvkl">apis</code> is an array of entries for each sample. Each entry sets a <code class="css-1vpgvkl">name</code>for the sample, as well as the commands/procedures to get and process the sample. The first entry in the example is named <code class="css-1vpgvkl">FileSystem</code>, which is used to name the <code class="css-1vpgvkl">FileSystemSample</code> event.</li><li class="css-0"><code class="css-1vpgvkl">commands</code> specifies how to get the information from CLI applications:<ul class="css-rjaevg"><li class="css-0"><code class="css-1vpgvkl">run: &#x27;df -PT -B1...</code> specifies the command to run.</li><li class="css-0"><code class="css-1vpgvkl">split: horizontal</code> states that each output line may return a metric.</li><li class="css-0"><code class="css-1vpgvkl">split_by</code> explains how to split each line in different fields. In this case, we use the <code class="css-1vpgvkl">\s+</code> regular expression, which tells Flex that any sequence of one or more white spaces is a separator.</li><li class="css-0"><code class="css-1vpgvkl">row_start</code> specifies that data starts right after the first row (which is <code class="css-1vpgvkl">0</code>).</li><li class="css-0"><code class="css-1vpgvkl">set_header</code> specifies, in order, a matching name for each value of the aforementioned array.</li><li class="css-0"><code class="css-1vpgvkl">perc_to_decimal: true</code> indicates to convert any percentage string into a decimal value, removing the trailing <code class="css-1vpgvkl">%</code> symbol.</li></ul></li></ul><p class="css-rjaevg"><strong class="css-0">Once the Flex config is created, the Infrastructure agent autodetects the new config and begins collecting data.</strong></p><p class="css-rjaevg">To check that your new integration is working, execute the following <a href="https://docs.newrelic.com/docs/query-data/nrql-new-relic-query-language" class="css-jy6qzv">NRQL query</a>:</p><pre class="language-sql prism-code language-sql css-k52kr0"><div class="token-line"><span class="token keyword css-1baulvz">FROM</span><span class="token plain css-1baulvz"> FileSystemSample </span><span class="token keyword css-1baulvz">SELECT</span><span class="token plain css-1baulvz"> mountedOn</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> fs</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> usedBytes</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> capacityBytes</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz"> usedBytes</span></div></pre><p class="css-rjaevg">The query should now produce a table similar to this:</p><p class="css-rjaevg"><img src="./img/basic-filesystem.png" class="css-9whsf3"/></p><h2 id="4-a-namehowtoaddmoreintegrationsahow-to-add-more-flex-integrations" class="css-1jjzpo2">4. <a name="Howtoaddmoreintegrations" class="css-jy6qzv"></a>How to add more Flex integrations</h2><p class="css-rjaevg">Stand-alone Flex configurations, like most of our examples, start with the name of the integration and the <a href="/nri-flex/apis/readme.md" class="css-jy6qzv">apis</a>. For example:</p><pre class="language-yaml prism-code language-yaml css-k52kr0"><div class="token-line"><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> linuxOpenFD</span></div><div class="token-line"><span class="token plain css-1baulvz"></span><span class="token key atrule css-1baulvz">apis</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> linuxOpenFD</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">commands</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> cat /proc/sys/fs/file</span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">nr </span><span class="token punctuation css-1baulvz">|</span><span class="token plain css-1baulvz"> awk &#x27;</span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz">print $1</span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">$2</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">$3</span><span class="token punctuation css-1baulvz">}</span><span class="token plain css-1baulvz">&#x27;</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> horizontal</span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">set_header</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">[</span><span class="token plain css-1baulvz">openFD</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">maxFD</span><span class="token punctuation css-1baulvz">]</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">regex_match</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token boolean important css-1baulvz">true</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token key atrule css-1baulvz">split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> (\d+)\s+(.*)</span></div></pre><p class="css-rjaevg">These stand-alone configurations can be tested by invoking Flex from the command line; this is useful when <a href="../development.md" class="css-jy6qzv">developing Flex integrations</a>, since invoking Flex directly doesn&#x27;t send data to the New Relic platform:</p><pre class="language-bash prism-code language-bash css-k52kr0"><div class="token-line"><span class="token function css-1baulvz">sudo</span><span class="token plain css-1baulvz"> /var/db/newrelic-infra/newrelic-integrations/bin/nri-flex --verbose --pretty --config_file ./myconfig.yml</span></div></pre><p class="css-rjaevg">To use Flex configurations files with the Infrastructure agent, you need to add some lines at the beginning. For example, if we add the example above to our <code class="css-1vpgvkl">integrations.d</code> file, we would get the following (notice the indentation):</p><pre class="language-yaml prism-code language-yaml css-k52kr0"><div class="token-line"><span class="token key atrule css-1baulvz">integrations</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> nri</span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">flex</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">config</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> linuxFileSystemIntegration</span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token key atrule css-1baulvz">apis</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> FileSystem</span></div><div class="token-line"><span class="token plain css-1baulvz">          </span><span class="token key atrule css-1baulvz">commands</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">            </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token string css-1baulvz">&#x27;df -PT -B1 -x tmpfs -x xfs -x vxfs -x btrfs -x ext -x ext2 -x ext3 -x ext4&#x27;</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">              </span><span class="token key atrule css-1baulvz">split</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> horizontal</span></div><div class="token-line"><span class="token plain css-1baulvz">              </span><span class="token key atrule css-1baulvz">split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> \s+</span></div><div class="token-line"><span class="token plain css-1baulvz">              </span><span class="token key atrule css-1baulvz">row_start</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token number css-1baulvz">1</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">              </span><span class="token key atrule css-1baulvz">set_header</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">[</span><span class="token plain css-1baulvz">fs</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">fsType</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">capacityBytes</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">usedBytes</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">availableBytes</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">usedPerc</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">mountedOn</span><span class="token punctuation css-1baulvz">]</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">          </span><span class="token key atrule css-1baulvz">perc_to_decimal</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token boolean important css-1baulvz">true</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> linuxOpenFD</span></div><div class="token-line"><span class="token plain css-1baulvz">      </span><span class="token key atrule css-1baulvz">apis</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">        </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> linuxOpenFD</span></div><div class="token-line"><span class="token plain css-1baulvz">          </span><span class="token key atrule css-1baulvz">commands</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">            </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">run</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> cat /proc/sys/fs/file</span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">nr </span><span class="token punctuation css-1baulvz">|</span><span class="token plain css-1baulvz"> awk &#x27;</span><span class="token punctuation css-1baulvz">{</span><span class="token plain css-1baulvz">print $1</span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">$2</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">$3</span><span class="token punctuation css-1baulvz">}</span><span class="token plain css-1baulvz">&#x27;</span></div><div class="token-line"><span class="token plain css-1baulvz">              </span><span class="token key atrule css-1baulvz">split</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> horizontal</span></div><div class="token-line"><span class="token plain css-1baulvz">              </span><span class="token key atrule css-1baulvz">set_header</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">[</span><span class="token plain css-1baulvz">openFD</span><span class="token punctuation css-1baulvz">,</span><span class="token plain css-1baulvz">maxFD</span><span class="token punctuation css-1baulvz">]</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">              </span><span class="token key atrule css-1baulvz">regex_match</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> </span><span class="token boolean important css-1baulvz">true</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">              </span><span class="token key atrule css-1baulvz">split_by</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> (\d+)\s+(.*)</span></div></pre><p class="css-rjaevg">To insert multiple Flex configurations to the <code class="css-1vpgvkl">integrations.d</code> config file, you can add multiple <code class="css-1vpgvkl">nri-flex</code> blocks, each with an embedded Flex config:</p><pre class="language-yaml prism-code language-yaml css-k52kr0"><div class="token-line"><span class="token key atrule css-1baulvz">integrations</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> nri</span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">flex</span></div><div class="token-line"><span class="token plain css-1baulvz">   </span><span class="token key atrule css-1baulvz">config</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">     </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> flexName_1</span></div><div class="token-line"><span class="token plain css-1baulvz">     </span><span class="token comment css-1baulvz"># Flex config goes here</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> nri</span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">flex</span></div><div class="token-line"><span class="token plain css-1baulvz">   </span><span class="token key atrule css-1baulvz">config</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">     </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> flexName_2</span></div><div class="token-line"><span class="token plain css-1baulvz">     </span><span class="token comment css-1baulvz"># Flex config goes here</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz"> </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> nri</span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">flex</span></div><div class="token-line"><span class="token plain css-1baulvz">   </span><span class="token key atrule css-1baulvz">config</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">     </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> flexName_3</span></div><div class="token-line"><span class="token plain css-1baulvz">     </span><span class="token comment css-1baulvz"># Flex config goes here</span></div></pre><p class="css-rjaevg">To minimize indentation issues, you can link to stand-alone Flex configuration files using the <code class="css-1vpgvkl">config_template_path</code> directive:</p><pre class="language-yaml prism-code language-yaml css-k52kr0"><div class="token-line"><span class="token key atrule css-1baulvz">integrations</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"></span></div><div class="token-line"><span class="token plain css-1baulvz">  </span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz"> </span><span class="token key atrule css-1baulvz">name</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> nri</span><span class="token punctuation css-1baulvz">-</span><span class="token plain css-1baulvz">flex</span></div><div class="token-line"><span class="token plain css-1baulvz">    </span><span class="token key atrule css-1baulvz">config_template_path</span><span class="token punctuation css-1baulvz">:</span><span class="token plain css-1baulvz"> /path/to/flex/integration.yml</span></div></pre><p class="css-rjaevg">In the Flex repo you can find more than <a href="../examples/flexConfigs" class="css-jy6qzv">200 config examples</a> of custom integrations. Remember to add them under <code class="css-1vpgvkl">config</code> in your integrations config file, or link to them using <code class="css-1vpgvkl">config_template_path</code> statements.</p><blockquote class="css-0"><p class="css-rjaevg">We strongly recommend that you use a YAML linter in your code editor to check for indentation issues in your config files. Most of the times, Flex rejects badly indented configurations.</p></blockquote><h2 id="5-a-namewhatsnextawhats-next" class="css-1jjzpo2">5. <a name="Whatsnext" class="css-jy6qzv"></a>What&#x27;s next?</h2><ul class="css-rjaevg"><li class="css-0">Learn more about the Flex configuration schema in <a href="/nri-flex/basics/configure.md" class="css-jy6qzv">Configure Flex</a>.</li><li class="css-0">Read about the <a href="/nri-flex/apis/url.md" class="css-jy6qzv">url</a> and <a href="/nri-flex/apis/command.md" class="css-jy6qzv">commands</a> APIs and how to create Flex integrations with them.</li><li class="css-0">See the <a href="/nri-flex/basics/functions.md" class="css-jy6qzv">list of supported functions</a> to understand what Flex is capable of.</li></ul></div></div></div></main></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/basic-tutorial";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-97e0e6260861db4891eb.js"],"component---node-modules-gatsby-theme-documentation-src-templates-doc-js":["/component---node-modules-gatsby-theme-documentation-src-templates-doc-js-d258603698fd7f6478c2.js"]};/*]]>*/</script><script src="/nri-flex/component---node-modules-gatsby-theme-documentation-src-templates-doc-js-d258603698fd7f6478c2.js" async=""></script><script src="/nri-flex/styles-681667273b3b2449dac4.js" async=""></script><script src="/nri-flex/app-97e0e6260861db4891eb.js" async=""></script><script src="/nri-flex/commons-888c9dc189c564b25dd6.js" async=""></script><script src="/nri-flex/webpack-runtime-a52b415a758b5d1a2854.js" async=""></script></body></html>